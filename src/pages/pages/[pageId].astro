---
import {Notion} from "@/constants/notion.constants";
import Layout from "@/layouts/Layout.astro";
import {httpClient} from "@/utils/http-client";
import {NotionApiTypes} from "@/utils/api/notion.api.types";
import {NotionRenderer} from 'react-notion-x'

import 'react-notion-x/src/styles.css'
import 'prismjs/themes/prism-tomorrow.css'
import 'katex/dist/katex.min.css'

export const prerender = true;

export function getStaticPaths() {
  return Notion.NOTION_PAGES
    .map(i => {
      return {params: {pageId: i}}
    });
}

console.log("url", Astro.url.origin + "/api/notion/pages/" + Astro.params.pageId)

Astro.locals.cache();

const data = (await httpClient.get(`/api/notion/pages/${Astro.params.pageId}`, {
  baseURL: "http://localhost:4321"
})).$
---

<Layout>
  {data &&
    <NotionRenderer recordMap={data} fullPage={true} darkMode={false}/>}
</Layout>
